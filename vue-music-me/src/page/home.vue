<template >
<div class="body">
  <div class="home">
    <div class="main">
      <header>
        <i class="icon icon-nav" @click="sideShow"></i>
        <nav>
          <router-link to="/musci" class="icon-nav-cm icon-nav-music"></router-link>
          <router-link to="/song" class="icon-nav-cm icon-nav-music"></router-link>
          <router-link to="/group" class="icon-nav-cm icon-nav-music"></router-link>
          <i class="icon icon-search" @click="toSearch"></i>
        </nav>
      </header>
      <section class="middle">
        <router-link></router-link>
      </section>
      <foot></foot>
    </div>
    <side class="side" id="side" :isSide="isSide"></side>
    <song-list class="song-list" :isList="isList"></song-list>
  </div>

</div>
</template>

<script>
import Store from '../store';
import Router from '../router';

import side from '../components/side';
import foot from '../components/foot';
import songList from '../components/songList';

export default {
  name: 'home',
  computed: {
    curSong() {
      return Store.state.curSong;
    },
    isSide() {
      return Store.state.isSide;
    },
    isList() {
      return Store.state.isList;
    }
  },
  components: {
    side,
    foot,
    songList
  },
  methods: {
    toSearch() {
      Router.push('/search');
    },
    sideShow() {
      Store.commit('side', 'show');
    }
  },
  watch: {
    isSide(value) {
      var side = document.querySelector('#side');
      if (value) {
        side.style.transform = "translateX(" + (617 / 75) + ")"
      } else {
        side.style.transform = 'translateX(0)';
      }
    },
    isList(value) {
      var list = document.querySelector('.song-list');
      if (value) {
        list.style.transform = 'translateY(-' + (800 / 75) + 'rem)';
      } else {
        list.style.transform = 'translateY(0)';
      }
    }
  }
}
</script>
<style scoped lang="less">
.body {
    height: 100%;
    position: relative;
}
.home {
    width: 100%;
    height: 100%;
    position: relative;
}
.main {
    height: 100%;
    display: -webkit-box;
    -webkit-box-orient: vertical;
}
header {
    width: 100%;
    height: 108/75rem;
    background: #d33a31;
    display: flex;
}
nav {
    flex: 1;
    text-align: center;
}
.middle {
    flex: 1;
    background: #f2f4f5;
}
.icon-nav {
    width: 108/75rem;
    height: 108/75rem;
    background: url("../assets/img/icon/icon-nav.png") no-repeat;
    background-size: contain;
}
.icon-search {
    width: 108/75rem;
    height: 108/75rem;
    background: url("../assets/img/icon/icon-search.png") no-repeat;
    background-size: contain;
}

.side {
    position: absolute;
    top: 0;
    left: -617/75rem;
    transition: all 1s;
}
.icon-nav-cm {
    display: inline-block;
    width: 108/75rem;
    height: 108/75rem;
}
.icon-nav-music {
    background: url("../assets/img/icon/icon-nav-music.png") no-repeat;
    background-size: contain;
}
.icon-nav-song {
    background: url("../assets/img/icon/icon-nav-song.png") no-repeat;
    background-size: contain;
}
.icon-nav-group {
    background: url("../assets/img/icon/icon-nav-group.png") no-repeat;
    background-size: contain;
}
.icon-nav-music.router-link-active {
    background-image: url("../assets/img/icon/icon-nav-music-cur.png");
}
.icon-nav-song.router-link-active {
    background-image: url("../assets/img/icon/icon-nav-song-cur.png");
}
.icon-nav-group.router-link-active {
    background-image: url("../assets/img/icon/icon-nav-group-cur.png");
}
</style>
